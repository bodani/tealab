Search.setIndex({"docnames": ["demo", "dev_list", "etcd", "index", "install-tea", "loki", "memcached", "minio", "mirror", "monitor", "node", "postgresql", "preface", "redis", "redis_cluster", "repmgr"], "filenames": ["demo.md", "dev_list.md", "etcd.md", "index.rst", "install-tea.md", "loki.md", "memcached.md", "minio.md", "mirror.md", "monitor.md", "node.md", "postgresql.md", "preface.md", "redis.md", "redis_cluster.md", "repmgr.md"], "titles": ["\u5feb\u901f\u5f00\u59cb", "\u5f00\u53d1\u8ba1\u5212\u5217\u8868 \u529f\u80fd\u7c7b", "etcd\u96c6\u7fa4\u7ba1\u7406", "tea", "\u5b89\u88c5tealabs", "Loki \u65e5\u5fd7\u7ba1\u7406", "memcached \u7ba1\u7406", "minio\u96c6\u7fa4\u7ba1\u7406", "\u642d\u5efayum\u6e90", "\u76d1\u63a7\u670d\u52a1", "\u670d\u52a1\u5668\u7ba1\u7406", "Postgresql\u96c6\u7fa4\u7ba1\u7406", "\u524d\u8a00", "redis\u9ad8\u53ef\u7528", "Redis \u96c6\u7fa4", "repmgr\u7ba1\u7406"], "terms": {"vim": [0, 2, 4, 8], "host": [0, 2, 4, 6, 7, 8, 9, 10, 13, 14, 15], "ini": [0, 2, 4, 6, 7, 8, 9, 10, 13, 14], "node": [0, 4, 7, 9, 10, 12, 15], "10": [0, 2, 4, 6, 7, 9, 10, 11, 13, 14, 15], "14": [0, 2, 4, 7, 9, 10, 11, 13, 14, 15], "ansibl": [0, 1, 4, 6, 7, 8, 12, 13, 14], "playbook": [0, 2, 4, 6, 7, 8, 9, 10, 11, 13, 14, 15], "create_us": [0, 4], "yml": [0, 2, 4, 6, 7, 8, 9, 10, 11, 13, 14, 15], "root": [0, 4, 7], "shell": [0, 4, 12], "whoami": [0, 4], "tea": [0, 1, 2, 4, 7, 9, 10], "repo": [0, 4, 8], "use_repo": 0, "vi": [0, 4, 15], "conf": [0, 2, 6, 7, 11, 13, 14, 15], "ip": [0, 13, 15], "create_nginx": 0, "yaml": 1, "prometheus": [1, 8, 9, 12], "grafana": [1, 9, 12], "altermanag": [1, 9], "export": [1, 8, 9, 12], "load": [1, 2], "dashboard": 1, "rule": 1, "loki": [1, 12], "promtail": 1, "python": 1, "docker": [1, 4, 12], "imag": 1, "click": 1, "https": [2, 4, 7, 8, 9, 11, 13, 15], "io": [2, 8, 13], "doc": [2, 9, 13, 15], "v3": 2, "op": 2, "guid": 2, "hardwar": 2, "version": [2, 4], "11": [2, 4, 7, 10, 11, 13, 14, 15], "12": [2, 4, 6, 7, 10, 11, 13, 14, 15], "13": [2, 4, 6, 7, 10, 11, 13, 14, 15], "var": [2, 4, 6, 7, 9, 11, 13, 14, 15], "name": [2, 8, 13], "cluster01": 2, "etcd_data_dir": 2, "lib": [2, 11, 13, 14, 15], "wal": [2, 12], "etcd_wal_dir": 2, "etcd_peer_port": 2, "2380": 2, "etcd_client_port": 2, "2379": 2, "local_etcd_backup_data": 2, "tmp": 2, "db": 2, "create_etcd": 2, "add_etcd": 2, "id": [2, 7], "etcdctl": 2, "member": 2, "list": [2, 4], "tabl": 2, "status": [2, 7], "peer": 2, "addr": 2, "client": 2, "is": [2, 3, 13, 14], "learner": 2, "de875c7a56a96ba": 2, "start": 2, "fals": [2, 7, 15], "57a1101668dd9764": 2, "5f0749d4389084c1": 2, "7cebb079e53fc9e7": 2, "remov": 2, "data": [2, 8, 9, 11, 15], "dir": [2, 13, 14], "move": 2, "snapshot": 2, "save": [2, 14], "etcd_data_backup": 2, "s3": [2, 7], "restore_etcd": 2, "etcdctl_api": 2, "make": 2, "mirror": [2, 7, 8], "option": 2, "destin": 2, "flag": [2, 13], "no": [2, 14], "dest": 2, "prefix": 2, "true": [2, 11, 15], "endpoint": [2, 7], "xxxx": 2, "insecur": 2, "skip": 2, "tls": 2, "verifi": 2, "v2": 2, "ttl": 2, "check": 2, "perf": [2, 7], "binari": 2, "upgrade_etcd": 2, "authent": 2, "rbac": 2, "an": [3, 12], "easi": [3, 12], "autom": [3, 12], "tool": [3, 7, 12], "postgr": [3, 11, 15], "what": 3, "whi": 3, "philosophi": 3, "tealab": [3, 8], "etcd": [3, 12], "leader": 3, "todo": [3, 4], "minio": [3, 12], "tag": [3, 4, 6, 13, 15], "redi": [3, 12], "sentinel": [3, 14], "memcach": 3, "ansbil": 4, "yum": 4, "instal": [4, 6, 7, 8], "epel": 4, "releas": [4, 8], "git": 4, "curl": [4, 7], "sshpass": 4, "27": 4, "useradd": 4, "home": [4, 7], "passwd": 4, "sudo": [4, 8, 15], "all": [4, 13, 14], "nopasswd": 4, "visudo": 4, "ssh": 4, "key": [4, 7], "su": [4, 15], "keygen": 4, "rsa": 4, "ls": 4, "clone": 4, "github": 4, "com": [4, 7, 9, 13], "bodani": 4, "gite": 4, "zhangeamon": [4, 8, 9], "cd": [4, 8], "usernam": [4, 15], "local": [4, 7], "local_bin": 4, "yournam": 4, "disable_rootlogin": 4, "privat": 4, "test": 4, "vvv": 4, "download": [4, 7], "prepar": [4, 7], "xxx": [4, 15], "tealab_packag": 4, "packag": [4, 8], "go": 4, "memcached_port": 6, "11211": 6, "memcached_us": 6, "memcached_maxconn": 6, "1024": 6, "mb": 6, "memcached_caches": 6, "64": 6, "memcached_opt": 6, "create_memcac": 6, "monitor": [6, 7, 9, 10, 13], "tar": 7, "bin": 7, "zxf": 7, "children": 7, "pool1": 7, "minio_ser_bin_loc": 7, "usr": 7, "node_dir": 7, "mnt": 7, "minio1": 7, "minio2": 7, "minio_root_us": 7, "minio_root_password": 7, "f447b20a7fcbf53a5d5be013ea0b15af": [7, 13, 14], "minio_ser_port": 7, "9000": 7, "ui": 7, "minio_conl_port": 7, "9001": 7, "minio_mc_alia": 7, "myminio": 7, "node_host": 7, "minio3": 7, "minio4": 7, "pool": 7, "minio_volum": 7, "http": [7, 9, 10], "sidekick": 7, "gateway": 7, "minio_lb_ser_port": 7, "9009": 7, "sidekick_backend": 7, "tea_ctl": 7, "creat": [7, 14, 15], "destori": 7, "volum": 7, "mc": 7, "admin": [7, 9, 13], "decommiss": 7, "capac": 7, "1st": 7, "73": 7, "mib": 7, "use": [7, 13, 14], "120": 7, "gib": 7, "total": 7, "activ": 7, "2nd": 7, "create_minio": 7, "info": [7, 13], "need": 7, "regist": 7, "support": [7, 12], "object": 7, "durat": 7, "20s": 7, "size": 7, "128mib": 7, "benchmark": 7, "warp": 7, "mix": 7, "access": 7, "secret": 7, "concurr": 7, "30": 7, "obj": 7, "500k": 7, "get": 7, "distrib": 7, "stat": 7, "put": 7, "delet": 7, "autoterm": 7, "zhuanlan": 7, "zhihu": 7, "600295425": 7, "srccluster": 7, "bucket": 7, "destclust": 7, "rclone": 7, "type": [7, 13], "provid": 7, "env_auth": 7, "access_key_id": 7, "secret_access_key": 7, "12345678": 7, "region": 7, "lsd": 7, "mkdir": 7, "sync": [7, 13], "file": [7, 8], "upgrad": [7, 13], "80": [8, 13], "repo_address": 8, "top": [8, 9], "repo_ip": 8, "192": 8, "168": 8, "15": 8, "repo_port": 8, "role": [8, 13], "default": [8, 11, 15], "main": 8, "repo_path": 8, "url": 8, "rpm": 8, "repo_url_packag": 8, "repo_packag": 8, "cat": 8, "baseurl": 8, "packagecloud": 8, "el": 8, "releasev": 8, "basearch": 8, "gpgcheck": 8, "and": [8, 12], "create_repo": 8, "downloadon": 8, "downloaddir": 8, "base": 8, "new_need_add": 8, "repotrack": 8, "new_need_add_": 8, "xml": 8, "createrepo": 8, "idc": [9, 10], "blackbox": [9, 12], "9090": 9, "3000": [9, 10], "9093": 9, "node_export": [9, 10], "9100": [9, 10], "blackbox_export": [9, 10], "9115": [9, 10], "path": 9, "prometheus_data_path": 9, "grafana_admin_usernam": 9, "grafana_admin_password": 9, "domain_http": 9, "www": 9, "baidu": 9, "hostnam": [10, 15], "control": [], "first": 10, "node1": 10, "node2": 10, "node3": 10, "harden": [], "linux": [12, 13], "cento": 12, "ubuntu": 12, "debian": 12, "nginx": 12, "haproxi": 12, "kafka": 12, "rabbitmq": 12, "repmgr": [3, 12], "patroni": 12, "pgbouncer": [11, 12], "citus": 12, "debezium": 12, "k3s": 12, "habor": 12, "filebeat": 12, "logstash": 12, "elasticsearch": 12, "zabbix": 12, "sentri": 12, "gitea": 12, "dns": 12, "everi": 12, "administr": 12, "at": 12, "some": 12, "point": 12, "reach": 12, "threshold": 12, "when": 12, "manual": [12, 13], "mainten": 12, "of": 12, "cluster": [12, 14, 15], "becom": 12, "arduous": 12, "chore": 12, "the": [12, 13, 14], "necess": 12, "solut": 12, "more": 12, "appar": 12, "here": 12, "will": 12, "be": 12, "discuss": 12, "exampl": 12, "such": 12, "simpl": 12, "power": 12, "process": 12, "should": 12, "obvious": 12, "coher": 12, "uniform": 12, "complex": 12, "instruct": 12, "custom": 12, "script": 12, "which": 12, "are": 12, "never": 12, "tribal": 12, "knowledg": 12, "minim": 12, "world": 12, "beauti": 12, "becaus": 12, "simplic": 12, "have": 12, "cup": 12, "wait": 12, "for": 12, "moment": 12, "everyth": 12, "accomplish": 12, "way": 12, "you": 12, "expect": 12, "it": 12, "to": [12, 13, 14, 15], "swap": 13, "cpu": 13, "6379": [13, 14], "26379": [13, 14], "redis_export": 13, "9121": 13, "master": 13, "has": 13, "persist": 13, "enabl": 13, "redis_rol": 13, "master_groupnam": 13, "mymaster001": 13, "quorum": [13, 14], "replicaof": [11, 13, 15], "replica_prior": 13, "100": [13, 14], "redis_sentinel": [13, 14], "redis_port": [13, 14], "redis_password": [13, 14], "bind": [13, 14], "min": [13, 14], "replica": [13, 14], "write": [13, 14], "max": [13, 14], "lag": [13, 14], "maxmemori": [13, 14], "10gb": [13, 14], "evict": [13, 14], "allkey": [13, 14], "lfu": [13, 14], "sentinel_port": [13, 14], "sentinel_password": [13, 14], "onli": [13, 14], "detect": [13, 14], "failur": [13, 14], "down": 13, "after": 13, "millisecond": [13, 14], "1000": [13, 14], "60": [13, 14], "failov": [13, 15], "timeout": 13, "180": [13, 14], "parallel": 13, "sentinel_dir": [13, 14], "create_redi": 13, "cli": [13, 14], "127": [13, 14], "auth": 13, "ok": 13, "replic": [13, 15], "connected_slav": 13, "slave0": 13, "port": [13, 15], "state": 13, "onlin": 13, "offset": 13, "1548116": 13, "slave1": 13, "runid": 13, "820a82215c08d11bbc0cbabe8061a460cd50c6f6": 13, "slave": 13, "shake": 13, "help": 13, "aliyun": 13, "document": 13, "detail": 13, "111066": 13, "html": [13, 15], "or": 13, "restart": 13, "instanc": 13, "without": 13, "downtim": 13, "redis_clust": 14, "rdb": 14, "aof": 14, "preambl": 14, "yes": 14, "3600": 14, "300": 14, "10000": 14, "appendon": 14, "appendfilenam": 14, "appenddirnam": 14, "appendonlydir": 14, "everysec": 14, "alway": 14, "appendfsync": 14, "no_appendfsync_on_rewrit": 14, "auto_aof_rewrite_percentag": 14, "auto_aof_rewrite_min_s": 14, "64mb": 14, "aof_load_trunc": 14, "aof_use_rdb_preambl": 14, "aof_timestamp_en": 14, "aof_rewrite_incremental_fsync": 14, "down_after_millisecond": 14, "failover_timeout": 14, "parallel_sync": 14, "cluster_en": 14, "cluster_node_timeout": 14, "cluster_migration_barri": 14, "cluster_require_full_coverag": 14, "cluster_allow_reads_when_down": 14, "redis_cluster_replica": 14, "7000": 14, "7001": 14, "7002": 14, "7003": 14, "7004": 14, "7005": 14, "create_redis_clust": 14, "second": 10, "node4": 10, "firewalld": 1, "log": [], "ro": [], "logrota": [], "logrot": 1, "aser": [], "assert": 1, "kgithub": 4, "postgresql": [3, 15], "application_nam": [11, 15], "node11": [11, 15], "node12": [11, 15], "node13": [11, 15], "node14": [11, 15], "pg_cluster_nam": [11, 15], "batman001": [11, 15], "pg_version": [11, 15], "pg_data": [11, 15], "pgsql": [11, 15], "rep_us": [11, 15], "repus": 11, "rep_password": [11, 15], "123456": [11, 15], "use_slot": [11, 15], "install_pgbounc": [11, 15], "pgtune": [11, 15], "leopard": [11, 15], "in": [11, 15], "ua": [11, 15], "create_postgresql": 11, "node_id": 15, "master_min_child_nod": 15, "ctl": [], "rejoin": 15, "dbname": 15, "user": 15, "forc": 15, "rewind": 15, "dri": 15, "run": 15, "share": [], "preload": [], "librari": [], "set": 15, "password": 15, "encrypt": 15, "scram": 15, "sha": 15, "256": 15, "login": 15, "superus": 15, "alter": 15, "search": [], "public": 15, "databas": 15, "owner": 15, "pgpass": 15, "5432": 15, "chmod": 15, "0600": 15, "pg": 15, "hba": 15, "recoveri": 15, "applic": [], "show": 15, "standbi": 15, "switchov": 15, "repmgrd": 3, "pwd123456": 15, "shared_preload_librari": 15, "repmgr_ctl": 15, "prepare_pg_manu": 15, "password_encrypt": 15, "search_path": 15, "node_nam": 15, "create_pgha_repmgr": 15, "pgha_repmgr": 15, "case": 3, "org": 15, "quickstart": 15, "configur": 15}, "objects": {}, "objtypes": {}, "objnames": {}, "titleterms": {"nginx": 0, "node": 1, "etcd": 2, "leader": 2, "todo": 2, "tea": [3, 12], "tealab": 4, "memcach": 6, "minio": 7, "tag": 7, "yum": 8, "postgr": 12, "what": 12, "is": 12, "whi": 12, "philosophi": 12, "redi": [13, 14], "sentinel": 13, "postgresql": 11, "repmgr": 15, "repmgrd": 15, "loki": 5, "case": 15}, "envversion": {"sphinx.domains.c": 2, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 6, "sphinx.domains.index": 1, "sphinx.domains.javascript": 2, "sphinx.domains.math": 2, "sphinx.domains.python": 3, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx": 56}})
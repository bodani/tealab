Search.setIndex({"docnames": ["demo", "dev_list", "etcd", "index", "install-tea", "memcached", "minio", "mirror", "monitor", "node", "preface", "redis", "redis_cluster"], "filenames": ["demo.md", "dev_list.md", "etcd.md", "index.rst", "install-tea.md", "memcached.md", "minio.md", "mirror.md", "monitor.md", "node.md", "preface.md", "redis.md", "redis_cluster.md"], "titles": ["\u5feb\u901f\u5f00\u59cb", "\u5f00\u53d1\u8ba1\u5212\u5217\u8868 \u529f\u80fd\u7c7b", "etcd\u96c6\u7fa4\u7ba1\u7406", "tea", "\u5b89\u88c5tea", "memcached \u7ba1\u7406", "minio\u96c6\u7fa4\u7ba1\u7406", "\u642d\u5efayum\u6e90", "\u76d1\u63a7\u670d\u52a1", "\u670d\u52a1\u5668\u7ba1\u7406", "\u524d\u8a00", "redis\u9ad8\u53ef\u7528", "Redis \u96c6\u7fa4"], "terms": {"cento": 10, "linux": [10, 11], "python": 1, "x86": [], "64": 5, "amd64": [], "root": [0, 4, 6], "yum": 4, "instal": [4, 5, 6, 7], "epel": 4, "releas": [4, 7], "git": 4, "curl": [4, 6], "sshpass": 4, "python2": [], "pip": 4, "tea": [0, 1, 2, 6, 9], "useradd": 4, "home": [4, 6], "passwd": 4, "tidb": [], "sudo": [4, 7], "all": [4, 11, 12], "nopasswd": 4, "visudo": 4, "ssh": 4, "key": [4, 6], "su": 4, "keygen": 4, "rsa": 4, "tealab": [4, 7], "clone": 4, "tag": [3, 4, 5, 8, 9, 11], "https": [2, 4, 6, 7, 8, 11], "github": 4, "com": [4, 6, 8, 11], "xxxx": 2, "ansibl": [0, 1, 2, 4, 5, 6, 7, 8, 9, 10, 11, 12], "cd": [4, 7], "requir": 4, "txt": 4, "version": [2, 4], "vi": [0, 4], "host": [0, 2, 4, 5, 6, 7, 8, 9, 11, 12], "ini": [0, 2, 4, 5, 6, 7, 8, 9, 11, 12], "server": [], "172": [], "16": [], "10": [0, 2, 4, 5, 6, 8, 9, 11, 12], "playbook": [0, 2, 4, 5, 6, 7, 8, 9, 11, 12], "create_us": [0, 4], "yml": [0, 2, 4, 5, 6, 7, 8, 9, 11, 12], "shell": [0, 4, 10], "whoami": [0, 4], "disable_rootlogin": 4, "privat": 4, "vagrant": [], "zhangeamon": [4, 7, 8], "insecure_private_key": [], "test": [4, 8], "list": [2, 4], "vim": [0, 2, 4, 7], "role": [7, 11], "repo": [0, 4, 7], "default": 7, "main": 7, "repo_path": 7, "data": [7, 8], "repo_port": 7, "80": [7, 11], "url": 7, "repo_address": 7, "mirror": [2, 6, 7], "top": [7, 8], "rpm": 7, "repo_url_packag": 7, "repo_packag": 7, "file": [6, 7], "prometheus": [1, 7, 8, 10], "baseurl": 7, "packagecloud": 7, "io": [2, 7, 11], "el": 7, "releasev": 7, "basearch": 7, "gpgcheck": 7, "name": [2, 7, 11], "and": [7, 10], "export": [1, 7, 8, 10], "create_repo": 7, "downloadon": 7, "downloaddir": 7, "base": 7, "packag": [4, 7], "xxx": 4, "repotrack": 7, "xml": 7, "createrepo": 7, "import": [], "ip": [0, 11], "14": [0, 2, 4, 6, 9, 11, 12], "create_nginx": 0, "nginx": 10, "eamonzhang": 4, "docker": [1, 4, 10], "compos": [], "up": [], "minio": [3, 10], "conf": [0, 2, 5, 6, 11, 12], "var": [2, 4, 5, 6, 8, 11, 12], "datastor": [], "adminus": [], "adminpassword": [], "ec": [], "use_monitor": [], "true": 2, "tea_ctl": 6, "init": [], "have": 10, "cup": 10, "of": 10, "wait": 10, "for": 10, "moment": 10, "everyth": 10, "is": [2, 3, 11, 12], "accomplish": 10, "the": [10, 11, 12], "way": 10, "you": 10, "expect": 10, "it": 10, "to": [10, 11, 12], "be": 10, "node": [0, 4, 6, 8, 9, 10], "usernam": 4, "yournam": 4, "use_repo": 0, "idc": [8, 9], "redis001": [], "redi": [3, 10], "ls": 4, "exec": [], "bash": [], "chang": [], "password": [], "user": [], "new": [], "bad": [], "shorter": [], "than": [], "charact": [], "retyp": [], "authent": 2, "token": [], "updat": [], "success": [], "etc": [], "sshd_config": [], "permitrootlogin": [], "yes": 12, "passwordauthent": [], "servic": [], "sshd": [], "restart": 11, "everyon": [], "at": 10, "some": 10, "point": 10, "reach": 10, "threshold": 10, "when": 10, "manual": [10, 11], "mainten": 10, "cluster": [10, 12], "becom": 10, "an": [3, 10], "arduous": 10, "chore": 10, "necess": 10, "autom": [3, 10], "solut": 10, "more": 10, "appar": 10, "here": 10, "will": 10, "discuss": 10, "exampl": 10, "such": 10, "philosophi": 3, "simplic": 10, "process": 10, "should": 10, "easi": [3, 10], "obvious": 10, "coher": 10, "uniform": 10, "complex": 10, "instruct": 10, "custom": 10, "script": 10, "which": 10, "are": 10, "never": 10, "support": [6, 10], "tribal": 10, "knowledg": 10, "minim": 10, "audit": [], "everi": 10, "action": [], "perform": [], "on": [], "log": [], "date": [], "involv": [], "exact": [], "command": [], "was": [], "execut": [], "simpl": 10, "power": 10, "world": 10, "beauti": 10, "becaus": 10, "whi": 3, "use_node_tun": [], "creat": [6, 12], "vvv": 4, "repo_ip": 7, "192": 7, "168": 7, "15": 7, "cat": 7, "etcd": [3, 10], "ansbil": 4, "cloudflar": [], "cfssl": [], "v1": [], "ca": [], "csr": [], "pem": [], "openssl": [], "x509": [], "in": [], "text": [], "noout": [], "etcdctl": 2, "ssl": [], "cert": [], "endpoint": [2, 6], "11": [2, 4, 6, 9, 11, 12], "2379": 2, "health": [], "member": 2, "5d36a1683ec7182": [], "healthi": [], "got": [], "result": [], "from": [], "13": [2, 4, 5, 6, 9, 11, 12], "2389": [], "8810f5b7934fb3c5": [], "a3a6e6e20c472a5a": [], "12": [2, 4, 5, 6, 9, 11, 12], "peerurl": [], "2381": [], "clienturl": [], "islead": [], "fals": [2, 6], "create_etcd": 2, "add_etcd": 2, "cert_expiri": [], "10000h": [], "cert_local_dir": [], "ectd": [], "ectd_cert_dir": [], "etcd_data_dir": 2, "lib": [2, 11, 12], "wal": [2, 10], "etcd_wal_dir": 2, "etcd_peer_port": 2, "2380": 2, "etcd_client_port": 2, "recreate_etcd": [], "delete_etcd": [], "id": [2, 6], "e875c7a56a96ba": [], "57a1101668dd9764": 2, "5924eb0f7f665351": [], "7cebb079e53fc9e7": 2, "remov": 2, "cfssljson": [], "usr": 6, "local": [4, 6], "bin": 6, "chmod": [], "87600h": [], "leader": 3, "etcd_tmp_backup_dir": [], "tmp": 2, "backup": [], "local_etcd_backup_dir": [], "backup_etcd": [], "etcd_snapshot": [], "db": 2, "snapshot": 2, "etd": [], "restore_etcd": 2, "migrat": [], "v2": 2, "v3": 2, "ttl": 2, "migrate_etcd_v2_2_v3": [], "binari": 2, "upgrade_etcd": 2, "todo": [3, 4], "haproxi": 10, "postgr": 3, "repmgr": 10, "patroni": 10, "pgbouncer": 10, "kafka": 10, "filebeat": 10, "logstash": 10, "elasticsearch": 10, "loki": [1, 10], "blackbox": [8, 10], "grafana": [1, 8, 10], "zabbix": 10, "citus": 10, "rabbitmq": 10, "new_need_add": 7, "new_need_add_": 7, "etcdctl_api": 2, "make": 2, "option": 2, "destin": 2, "flag": [2, 11], "shake": 11, "type": [6, 11], "sync": [6, 11], "help": 11, "aliyun": 11, "document": 11, "detail": 11, "111066": 11, "html": 11, "mc": 6, "srccluster": 6, "bucket": 6, "destclust": 6, "rclone": 6, "ubuntu": 10, "debian": 10, "k3s": 10, "hub": [], "sentri": 10, "gitea": 10, "debezium": 10, "dns": 10, "check_user_ssh": [], "habor": 10, "download": [4, 6, 8], "cfssl_1": [], "2_linux_amd64": [], "cfssljson_1": [], "certinfo": [], "certinfo_1": [], "communic": [], "encrypt": [], "doc": [2, 8, 11], "op": 2, "guid": 2, "secur": [], "hardwar": 2, "rbac": 2, "what": 3, "remote_us": [], "go": 4, "tool": [3, 6, 10], "administr": 10, "gateway": 6, "children": 6, "pool1": 6, "minio_ser_bin_loc": 6, "node_dir": 6, "mnt": 6, "minio1": 6, "minio2": 6, "minio_root_us": 6, "minio_root_password": 6, "f447b20a7fcbf53a5d5be013ea0b15af": [6, 11, 12], "minio_ser_port": 6, "9000": 6, "ui": 6, "minio_conl_port": 6, "9001": 6, "minio_mc_alia": 6, "myminio": 6, "node_host": 6, "minio3": 6, "minio4": 6, "minio_volum": 6, "http": [6, 8, 9], "sidekick": 6, "minio_lb_ser_port": 6, "9009": 6, "sidekick_backend": 6, "admin": [6, 8, 11], "info": [6, 11], "develop": [], "articl": [], "1003067": [], "blob": [], "master": 11, "disk": [], "cach": [], "design": [], "md": [], "warp": 6, "destori": 6, "s3": [2, 6], "provid": 6, "env_auth": 6, "access_key_id": 6, "secret_access_key": 6, "12345678": 6, "region": 6, "lsd": 6, "mkdir": 6, "local_bin": 4, "wget": [], "dl": [], "pool": 6, "volum": 6, "decommiss": 6, "status": [2, 6], "capac": 6, "1st": 6, "73": 6, "mib": 6, "use": [6, 11, 12], "120": 6, "gib": 6, "total": 6, "activ": 6, "2nd": 6, "monitor": [5, 6, 8, 9, 11], "upgrad": [6, 11], "9090": 8, "3000": [8, 9], "altermanag": [1, 8], "9093": 8, "node_export": [8, 9], "9100": [8, 9], "blackbox_export": [8, 9], "9115": [8, 9], "path": 8, "prometheus_data_path": 8, "grafana_admin_usernam": 8, "grafana_admin_password": 8, "domain_http": 8, "www": 8, "baidu": 8, "alertmanag": [], "promtool": [], "prepar": [4, 6, 8], "hostnam": 9, "control": 9, "first": 9, "node1": 9, "node2": 9, "node3": 9, "minitor": [], "harden": 9, "gite": 4, "tar": 6, "sh": 4, "unzip": 4, "reload_etcd": [], "reload": [], "no": [2, 12], "dest": 2, "prefix": 2, "127": [11, 12], "insecur": 2, "skip": 2, "tls": 2, "verifi": 2, "swap": 11, "cpu": 11, "sentinel": [3, 12], "has": 11, "persist": 11, "enabl": 11, "redis_rol": 11, "master_groupnam": 11, "mymaster001": 11, "quorum": [11, 12], "replicaof": 11, "replica_prior": 11, "100": [11, 12], "redis_sentinel": [11, 12], "redis_port": [11, 12], "6379": [11, 12], "dir": [11, 12], "redis_password": [11, 12], "bind": [11, 12], "min": [11, 12], "replica": [11, 12], "write": [11, 12], "max": [11, 12], "lag": [11, 12], "maxmemori": [11, 12], "10gb": [11, 12], "evict": [11, 12], "allkey": [11, 12], "lfu": [11, 12], "sentinel_port": [11, 12], "26379": [11, 12], "sentinel_password": [11, 12], "onli": [11, 12], "detect": [11, 12], "failur": [11, 12], "down": 11, "after": 11, "millisecond": [11, 12], "1000": [11, 12], "60": [11, 12], "failov": 11, "timeout": 11, "180": [11, 12], "parallel": 11, "sentinel_dir": [11, 12], "create_redi": 11, "redis_on": [], "master_replica": [], "cli": [11, 12], "auth": 11, "ok": 11, "replic": 11, "connected_slav": 11, "slave0": 11, "port": 11, "state": 11, "onlin": 11, "offset": 11, "1548116": 11, "slave1": 11, "runid": 11, "820a82215c08d11bbc0cbabe8061a460cd50c6f6": 11, "slave": 11, "or": 11, "instanc": 11, "without": 11, "downtim": 11, "redis_export": 11, "9121": 11, "redis_clust": 12, "rdb": 12, "aof": 12, "preambl": 12, "save": [2, 12], "3600": 12, "300": 12, "10000": 12, "appendon": 12, "appendfilenam": 12, "appenddirnam": 12, "appendonlydir": 12, "everysec": 12, "alway": 12, "appendfsync": 12, "no_appendfsync_on_rewrit": 12, "auto_aof_rewrite_percentag": 12, "auto_aof_rewrite_min_s": 12, "64mb": 12, "aof_load_trunc": 12, "aof_use_rdb_preambl": 12, "aof_timestamp_en": 12, "aof_rewrite_incremental_fsync": 12, "down_after_millisecond": 12, "failover_timeout": 12, "parallel_sync": 12, "cluster_en": 12, "cluster_node_timeout": 12, "cluster_migration_barri": 12, "cluster_require_full_coverag": 12, "cluster_allow_reads_when_down": 12, "redis_cluster_replica": 12, "7000": 12, "7001": 12, "7002": 12, "7003": 12, "7004": 12, "7005": 12, "create_redis_clust": 12, "with": [], "as": [], "select": [], "sum": [], "case": [], "relkind": [], "then": [], "pg_stat_get_numscan": [], "oid": [], "end": [], "seq": [], "idx": [], "pg_class": [], "where": [], "row_to_json": [], "memcach": 3, "memcached_port": 5, "11211": 5, "memcached_us": 5, "memcached_maxconn": 5, "1024": 5, "mb": 5, "memcached_caches": 5, "memcached_opt": 5, "create_memcac": 5, "python3": 4, "zxf": 6, "create_minio": 6, "perf": [2, 6], "object": 6, "durat": 6, "20s": 6, "size": 6, "128mib": 6, "zhuanlan": 6, "zhihu": 6, "600295425": 6, "yaml": 1, "load": 1, "dashboard": 1, "rule": 1, "promtail": 1, "imag": 1, "click": 1, "need": 6, "regist": 6, "benchmark": 6, "mix": 6, "access": 6, "secret": 6, "concurr": 6, "30": 6, "obj": 6, "500k": 6, "get": 6, "distrib": 6, "stat": 6, "put": 6, "delet": 6, "autoterm": 6, "tabl": 2, "learner": 2, "raft": [], "term": [], "index": [], "appli": [], "error": [], "20": [], "kb": [], "25": [], "de875c7a56a96ba": 2, "peer": 2, "addr": 2, "client": 2, "start": 2, "5f0749d4389084c1": 2, "move": 2, "etcd_data_backup": 2, "check": 2, "cluster01": 2, "local_etcd_backup_data": 2}, "objects": {}, "objtypes": {}, "objnames": {}, "titleterms": {"welcom": [], "to": [], "tea": [3, 4, 10], "document": [], "nginx": 0, "root": [], "tealab": [], "have": [], "cup": [], "of": [], "whi": 10, "philosophi": 10, "etcd": 2, "yum": 7, "migrat": [], "v2": [], "v3": [], "todo": 2, "minio": 6, "postgr": 10, "redi": [11, 12], "what": 10, "is": 10, "an": [], "easi": [], "autom": [], "tool": [], "gateway": [], "sentinel": 11, "memcach": 5, "import": [], "node": 1, "tag": 6, "leader": 2}, "envversion": {"sphinx.domains.c": 2, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 6, "sphinx.domains.index": 1, "sphinx.domains.javascript": 2, "sphinx.domains.math": 2, "sphinx.domains.python": 3, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx": 56}})
Search.setIndex({"docnames": ["demo", "etcd", "index", "install-tea", "memcached", "minio", "mirror", "monitor", "node", "preface", "redis", "redis_cluster"], "filenames": ["demo.md", "etcd.md", "index.rst", "install-tea.md", "memcached.md", "minio.md", "mirror.md", "monitor.md", "node.md", "preface.md", "redis.md", "redis_cluster.md"], "titles": ["\u5feb\u901f\u5f00\u59cb", "etcd\u96c6\u7fa4\u7ba1\u7406", "tea", "\u5b89\u88c5tea", "memcached \u7ba1\u7406", "minio\u96c6\u7fa4\u7ba1\u7406", "\u642d\u5efayum\u6e90", "\u76d1\u63a7\u670d\u52a1", "\u670d\u52a1\u5668\u7ba1\u7406", "\u524d\u8a00", "redis\u9ad8\u53ef\u7528", "Redis \u96c6\u7fa4"], "terms": {"cento": 9, "linux": [9, 10], "python": [], "x86": [], "64": 4, "amd64": [], "root": [0, 3, 5], "yum": 3, "instal": [3, 4, 6], "epel": 3, "releas": [3, 6], "git": 3, "curl": [3, 5], "sshpass": 3, "python2": [], "pip": 3, "tea": [0, 1, 5, 8], "useradd": 3, "home": [3, 5], "passwd": 3, "tidb": [], "sudo": [3, 6], "all": [3, 10, 11], "nopasswd": 3, "visudo": 3, "ssh": 3, "key": 3, "su": 3, "keygen": 3, "rsa": 3, "tealab": [3, 6], "clone": 3, "tag": [3, 4, 5, 7, 8, 10], "https": [1, 3, 5, 6, 7, 10], "github": [3, 5], "com": [3, 5, 7, 10], "xxxx": [], "ansibl": [0, 1, 3, 4, 5, 6, 7, 8, 9, 10, 11], "cd": [3, 6], "requir": 3, "txt": 3, "version": [1, 3], "vi": [0, 3], "host": [0, 1, 3, 4, 5, 6, 7, 8, 10, 11], "ini": [0, 1, 3, 4, 5, 6, 7, 8, 10, 11], "server": [], "172": [], "16": [], "10": [0, 1, 3, 4, 5, 7, 8, 10, 11], "playbook": [0, 1, 3, 4, 5, 6, 7, 8, 10, 11], "create_us": [0, 3], "yml": [0, 1, 3, 4, 5, 6, 7, 8, 10, 11], "shell": [0, 3, 9], "whoami": [0, 3], "disable_rootlogin": 3, "privat": 3, "vagrant": [], "zhangeamon": [3, 6, 7], "insecure_private_key": [], "test": [3, 7], "list": [1, 3], "vim": [0, 1, 3, 6], "role": [6, 10], "repo": [0, 3, 6], "default": 6, "main": 6, "repo_path": 6, "data": [6, 7], "repo_port": 6, "80": [6, 10], "url": 6, "repo_address": 6, "mirror": [1, 5, 6], "top": [6, 7], "rpm": 6, "repo_url_packag": 6, "repo_packag": 6, "file": [1, 5, 6], "prometheus": [6, 7, 9], "baseurl": 6, "packagecloud": 6, "io": [1, 6, 10], "el": 6, "releasev": 6, "basearch": 6, "gpgcheck": 6, "name": [1, 6, 10], "and": [6, 9], "export": [6, 7, 9], "create_repo": 6, "downloadon": 6, "downloaddir": 6, "base": 6, "packag": [3, 6], "xxx": 3, "repotrack": 6, "xml": 6, "createrepo": 6, "import": [], "ip": [0, 10], "14": [0, 1, 3, 5, 8, 10, 11], "create_nginx": 0, "nginx": 9, "eamonzhang": 3, "docker": [3, 9], "compos": [], "up": [], "minio": [2, 9], "conf": [0, 1, 3, 4, 5, 10, 11], "var": [1, 3, 4, 5, 7, 10, 11], "datastor": [], "adminus": [], "adminpassword": [], "ec": [], "use_monitor": [], "true": 1, "tea_ctl": [3, 5], "init": [], "have": 9, "cup": 9, "of": 9, "wait": 9, "for": 9, "moment": 9, "everyth": 9, "is": [1, 2, 10, 11], "accomplish": 9, "the": [9, 10, 11], "way": 9, "you": 9, "expect": 9, "it": 9, "to": [2, 9, 10, 11], "be": 9, "node": [0, 3, 5, 7, 8, 9], "usernam": 3, "yournam": 3, "use_repo": 0, "idc": [3, 7, 8], "redis001": 3, "redi": [2, 3, 9], "ls": 3, "exec": [], "bash": [], "chang": [], "password": [], "user": [], "new": [], "bad": [], "shorter": [], "than": [], "charact": [], "retyp": [], "authent": 1, "token": [], "updat": [], "success": [], "etc": 1, "sshd_config": [], "permitrootlogin": [], "yes": 11, "passwordauthent": [], "servic": [], "sshd": [], "restart": 10, "everyon": [], "at": 9, "some": 9, "point": 9, "reach": 9, "threshold": 9, "when": 9, "manual": [9, 10], "mainten": 9, "cluster": [1, 9, 11], "becom": 9, "an": [2, 9], "arduous": 9, "chore": 9, "necess": 9, "autom": [2, 9], "solut": 9, "more": 9, "appar": 9, "here": 9, "will": 9, "discuss": 9, "exampl": 9, "such": 9, "philosophi": 2, "simplic": 9, "process": 9, "should": 9, "easi": [2, 9], "obvious": 9, "coher": 9, "uniform": 9, "complex": 9, "instruct": 9, "custom": 9, "script": 9, "which": 9, "are": 9, "never": 9, "support": [5, 9], "tribal": 9, "knowledg": 9, "minim": 9, "audit": [], "everi": 9, "action": [], "perform": [], "on": [], "log": [], "date": [], "involv": [], "exact": [], "command": [], "was": [], "execut": [], "simpl": 9, "power": 9, "world": 9, "beauti": 9, "becaus": 9, "whi": 2, "use_node_tun": [], "creat": [3, 5, 11], "vvv": 3, "repo_ip": 6, "192": 6, "168": 6, "15": 6, "cat": 6, "etcd": [2, 9], "ansbil": 3, "cloudflar": [], "cfssl": 1, "v1": [], "ca": 1, "csr": [], "pem": 1, "openssl": [], "x509": [], "in": [], "text": [], "noout": [], "etcdctl": 1, "ssl": 1, "cert": 1, "endpoint": [1, 5], "11": [1, 3, 5, 8, 10, 11], "2379": 1, "health": 1, "member": 1, "5d36a1683ec7182": 1, "healthi": 1, "got": 1, "result": 1, "from": 1, "13": [1, 3, 4, 5, 8, 10, 11], "2389": 1, "8810f5b7934fb3c5": 1, "a3a6e6e20c472a5a": 1, "12": [1, 3, 4, 5, 8, 10, 11], "peerurl": 1, "2381": 1, "clienturl": 1, "islead": 1, "fals": [1, 5], "create_etcd": 1, "add_etcd": 1, "cert_expiri": 1, "10000h": [], "cert_local_dir": 1, "ectd": 1, "ectd_cert_dir": 1, "etcd_data_dir": 1, "lib": [1, 10, 11], "wal": [1, 9], "etcd_wal_dir": 1, "etcd_peer_port": 1, "2380": 1, "etcd_client_port": 1, "recreate_etcd": [], "delete_etcd": 1, "id": [1, 5], "e875c7a56a96ba": 1, "57a1101668dd9764": 1, "5924eb0f7f665351": 1, "7cebb079e53fc9e7": 1, "remov": 1, "cfssljson": [], "usr": 5, "local": [3, 5], "bin": 5, "chmod": [], "87600h": 1, "leader": 1, "etcd_tmp_backup_dir": 1, "tmp": 1, "backup": 1, "local_etcd_backup_dir": 1, "backup_etcd": 1, "etcd_snapshot": 1, "db": 1, "snapshot": 1, "etd": 1, "restore_etcd": 1, "migrat": 2, "v2": 2, "v3": 2, "ttl": 1, "migrate_etcd_v2_2_v3": 1, "binari": 1, "upgrade_etcd": 1, "todo": 2, "haproxi": 9, "postgr": 2, "repmgr": 9, "patroni": 9, "pgbouncer": 9, "kafka": 9, "filebeat": 9, "logstash": 9, "elasticsearch": 9, "loki": 9, "blackbox": [7, 9], "grafana": [7, 9], "zabbix": 9, "citus": 9, "rabbitmq": 9, "new_need_add": 6, "new_need_add_": 6, "etcdctl_api": 1, "make": 1, "option": 1, "destin": 1, "flag": [1, 10], "shake": 10, "type": [5, 10], "sync": [5, 10], "help": 10, "aliyun": 10, "document": 10, "detail": 10, "111066": 10, "html": 10, "mc": 5, "srccluster": 5, "bucket": 5, "destclust": 5, "rclone": 5, "ubuntu": 9, "debian": 9, "k3s": 9, "hub": [], "sentri": 9, "gitea": 9, "debezium": 9, "dns": 9, "check_user_ssh": [], "habor": 9, "download": [3, 5, 7], "cfssl_1": [], "2_linux_amd64": [], "cfssljson_1": [], "certinfo": 1, "certinfo_1": [], "communic": [], "encrypt": [], "doc": [1, 7, 10], "op": 1, "guid": 1, "secur": [], "hardwar": 1, "rbac": 1, "what": 2, "remote_us": 3, "go": 3, "tool": [2, 9], "administr": 9, "gateway": 5, "children": 5, "pool1": 5, "minio_ser_bin_loc": 5, "node_dir": 5, "mnt": 5, "minio1": 5, "minio2": 5, "minio_root_us": 5, "minio_root_password": 5, "f447b20a7fcbf53a5d5be013ea0b15af": [5, 10, 11], "minio_ser_port": 5, "9000": 5, "ui": 5, "minio_conl_port": 5, "9001": 5, "minio_mc_alia": 5, "myminio": 5, "node_host": 5, "minio3": 5, "minio4": 5, "minio_volum": 5, "http": [5, 7, 8], "sidekick": 5, "minio_lb_ser_port": 5, "9009": 5, "sidekick_backend": 5, "admin": [5, 7, 10], "info": [5, 10], "develop": [], "articl": [], "1003067": [], "blob": [], "master": 10, "disk": [], "cach": [], "design": [], "md": [], "warp": 5, "destori": 5, "s3": 5, "provid": 5, "env_auth": 5, "access_key_id": 5, "secret_access_key": 5, "12345678": 5, "region": 5, "lsd": 5, "mkdir": 5, "local_bin": 3, "wget": [], "dl": [], "pool": 5, "volum": 5, "decommiss": 5, "status": 5, "capac": 5, "1st": 5, "73": 5, "mib": 5, "use": [5, 10, 11], "120": 5, "gib": 5, "total": 5, "activ": 5, "2nd": 5, "monitor": [3, 4, 7, 8, 10], "upgrad": [5, 10], "9090": 7, "3000": [7, 8], "altermanag": 7, "9093": 7, "node_export": [7, 8], "9100": [7, 8], "blackbox_export": [7, 8], "9115": [7, 8], "path": 7, "prometheus_data_path": 7, "grafana_admin_usernam": 7, "grafana_admin_password": 7, "domain_http": 7, "www": 7, "baidu": 7, "alertmanag": [], "promtool": [], "prepar": [3, 5, 7], "hostnam": 8, "control": 8, "first": 8, "node1": 8, "node2": 8, "node3": 8, "minitor": [], "harden": 8, "gite": 3, "tar": 5, "sh": 3, "unzip": 3, "reload_etcd": 1, "reload": 1, "no": [1, 11], "dest": 1, "prefix": 1, "127": [1, 10, 11], "insecur": 1, "skip": 1, "tls": 1, "verifi": 1, "swap": 10, "cpu": 10, "sentinel": [2, 11], "has": 10, "persist": 10, "enabl": 10, "redis_rol": 10, "master_groupnam": 10, "mymaster001": 10, "quorum": [10, 11], "replicaof": 10, "replica_prior": 10, "100": [10, 11], "redis_sentinel": [10, 11], "redis_port": [10, 11], "6379": [10, 11], "dir": [10, 11], "redis_password": [10, 11], "bind": [10, 11], "min": [10, 11], "replica": [10, 11], "write": [10, 11], "max": [10, 11], "lag": [10, 11], "maxmemori": [10, 11], "10gb": [10, 11], "evict": [10, 11], "allkey": [10, 11], "lfu": [10, 11], "sentinel_port": [10, 11], "26379": [10, 11], "sentinel_password": [10, 11], "onli": [10, 11], "detect": [10, 11], "failur": [10, 11], "down": 10, "after": 10, "millisecond": [10, 11], "1000": [10, 11], "60": [10, 11], "failov": 10, "timeout": 10, "180": [10, 11], "parallel": 10, "sentinel_dir": [10, 11], "create_redi": 10, "redis_on": [], "master_replica": [], "cli": [10, 11], "auth": 10, "ok": 10, "replic": 10, "connected_slav": 10, "slave0": 10, "port": 10, "state": 10, "onlin": 10, "offset": 10, "1548116": 10, "slave1": 10, "runid": 10, "820a82215c08d11bbc0cbabe8061a460cd50c6f6": 10, "slave": 10, "or": 10, "instanc": 10, "without": 10, "downtim": 10, "redis_export": 10, "9121": 10, "redis_clust": 11, "rdb": 11, "aof": 11, "preambl": 11, "save": 11, "3600": 11, "300": 11, "10000": 11, "appendon": 11, "appendfilenam": 11, "appenddirnam": 11, "appendonlydir": 11, "everysec": 11, "alway": 11, "appendfsync": 11, "no_appendfsync_on_rewrit": 11, "auto_aof_rewrite_percentag": 11, "auto_aof_rewrite_min_s": 11, "64mb": 11, "aof_load_trunc": 11, "aof_use_rdb_preambl": 11, "aof_timestamp_en": 11, "aof_rewrite_incremental_fsync": 11, "down_after_millisecond": 11, "failover_timeout": 11, "parallel_sync": 11, "cluster_en": 11, "cluster_node_timeout": 11, "cluster_migration_barri": 11, "cluster_require_full_coverag": 11, "cluster_allow_reads_when_down": 11, "redis_cluster_replica": 11, "7000": 11, "7001": 11, "7002": 11, "7003": 11, "7004": 11, "7005": 11, "create_redis_clust": 11, "with": [], "as": [], "select": [], "sum": [], "case": [], "relkind": [], "then": [], "pg_stat_get_numscan": [], "oid": [], "end": [], "seq": [], "idx": [], "pg_class": [], "where": [], "row_to_json": [], "memcach": 2, "memcached_port": 4, "11211": 4, "memcached_us": 4, "memcached_maxconn": 4, "1024": 4, "mb": 4, "memcached_caches": 4, "memcached_opt": 4, "create_memcac": 4, "python3": 3, "zxf": 5, "create_minio": 5, "perf": 5, "object": 5, "durat": 5, "20s": 5, "size": 5, "128mib": 5, "zhuanlan": 5, "zhihu": 5, "600295425": 5}, "objects": {}, "objtypes": {}, "objnames": {}, "titleterms": {"welcom": [], "to": 1, "tea": [2, 3, 9], "document": [], "nginx": 0, "root": [], "tealab": [], "have": [], "cup": [], "of": [], "whi": 9, "philosophi": 9, "etcd": 1, "yum": 6, "migrat": 1, "v2": 1, "v3": 1, "todo": 1, "minio": 5, "postgr": 9, "redi": [10, 11], "what": 9, "is": 9, "an": [], "easi": [], "autom": [], "tool": [], "gateway": [], "sentinel": 10, "memcach": 4, "import": []}, "envversion": {"sphinx.domains.c": 2, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 6, "sphinx.domains.index": 1, "sphinx.domains.javascript": 2, "sphinx.domains.math": 2, "sphinx.domains.python": 3, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx": 56}})
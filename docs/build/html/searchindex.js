Search.setIndex({"docnames": ["config", "demo", "dev_list", "etcd", "index", "install-tea", "loki", "memcached", "minio", "mirror", "monitor", "node", "postgresql", "preface", "redis", "redis_cluster", "repmgr"], "filenames": ["config.md", "demo.md", "dev_list.md", "etcd.md", "index.rst", "install-tea.md", "loki.md", "memcached.md", "minio.md", "mirror.md", "monitor.md", "node.md", "postgresql.md", "preface.md", "redis.md", "redis_cluster.md", "repmgr.md"], "titles": ["\u914d\u7f6e\u8bf4\u660e", "\u5feb\u901f\u5f00\u59cb", "\u5f00\u53d1\u8ba1\u5212\u5217\u8868 \u529f\u80fd\u7c7b", "etcd\u96c6\u7fa4\u7ba1\u7406", "tea", "\u5b89\u88c5tealabs", "Loki \u65e5\u5fd7\u7ba1\u7406", "memcached \u7ba1\u7406", "minio\u96c6\u7fa4\u7ba1\u7406", "\u642d\u5efayum\u6e90", "\u76d1\u63a7\u670d\u52a1", "\u670d\u52a1\u5668\u7ba1\u7406", "Postgresql\u96c6\u7fa4\u7ba1\u7406", "\u524d\u8a00", "redis\u9ad8\u53ef\u7528", "Redis \u96c6\u7fa4", "repmgr\u7ba1\u7406"], "terms": {"vim": [1, 3, 5, 9], "host": [1, 3, 5, 7, 8, 9, 10, 11, 14, 15, 16], "ini": [0, 1, 3, 5, 7, 8, 9, 10, 11, 14, 15], "node": [0, 1, 5, 8, 10, 11, 13, 16], "10": [0, 1, 3, 5, 7, 8, 10, 11, 12, 14, 15, 16], "14": [0, 1, 3, 5, 8, 10, 11, 12, 14, 15, 16], "ansibl": [0, 1, 2, 5, 7, 8, 9, 13, 14, 15], "playbook": [1, 3, 5, 7, 8, 9, 10, 11, 12, 14, 15, 16], "create_us": [0, 1, 5], "yml": [1, 3, 5, 7, 8, 9, 10, 11, 12, 14, 15, 16], "root": [1, 5, 8], "shell": [1, 5, 13], "whoami": [1, 5], "tea": [0, 1, 2, 3, 5, 8, 10, 11], "repo": [0, 1, 5, 9], "use_repo": 1, "vi": [1, 5, 16], "conf": [1, 3, 7, 8, 12, 14, 15, 16], "ip": [1, 14, 16], "create_nginx": 1, "yaml": 2, "prometheus": [0, 2, 9, 10, 13], "grafana": [0, 2, 10, 13], "altermanag": [2, 10], "export": [2, 9, 10, 13], "load": [2, 3], "dashboard": 2, "rule": 2, "loki": [0, 2, 13], "promtail": 2, "python": 2, "docker": [0, 2, 5, 13], "imag": 2, "click": 2, "https": [0, 3, 5, 8, 9, 10, 12, 14, 16], "io": [3, 9, 14], "doc": [0, 3, 10, 14, 16], "v3": 3, "op": 3, "guid": 3, "hardwar": 3, "version": [0, 3, 5], "11": [0, 3, 5, 8, 11, 12, 14, 15, 16], "12": [0, 3, 5, 7, 8, 11, 12, 14, 15, 16], "13": [0, 3, 5, 7, 8, 11, 12, 14, 15, 16], "var": [0, 3, 5, 7, 8, 10, 12, 14, 15, 16], "name": [3, 9, 14], "cluster01": 3, "etcd_data_dir": [0, 3], "lib": [0, 3, 12, 14, 15, 16], "wal": [0, 3, 13], "etcd_wal_dir": [0, 3], "etcd_peer_port": [0, 3], "2380": [0, 3], "etcd_client_port": [0, 3], "2379": [0, 3], "local_etcd_backup_data": 3, "tmp": [0, 3], "db": 3, "create_etcd": 3, "add_etcd": 3, "id": [3, 8], "etcdctl": 3, "member": 3, "list": [3, 5], "tabl": 3, "status": [3, 8], "peer": 3, "addr": 3, "client": 3, "is": [3, 4, 14, 15], "learner": 3, "de875c7a56a96ba": 3, "start": 3, "fals": [3, 8, 16], "57a1101668dd9764": 3, "5f0749d4389084c1": 3, "7cebb079e53fc9e7": 3, "remov": 3, "data": [0, 3, 9, 10, 12, 16], "dir": [3, 14, 15], "move": 3, "snapshot": 3, "save": [3, 15], "etcd_data_backup": 3, "s3": [3, 8], "restore_etcd": 3, "etcdctl_api": 3, "make": 3, "mirror": [3, 8, 9], "option": 3, "destin": 3, "flag": [3, 14], "no": [3, 15], "dest": 3, "prefix": 3, "true": [3, 12, 16], "endpoint": [3, 8], "xxxx": 3, "insecur": 3, "skip": 3, "tls": 3, "verifi": 3, "v2": 3, "ttl": 3, "check": 3, "perf": [3, 8], "binari": 3, "upgrade_etcd": 3, "authent": 3, "rbac": 3, "an": [4, 13], "easi": [4, 13], "autom": [4, 13], "tool": [4, 8, 13], "postgr": [4, 12, 16], "what": 4, "whi": 4, "philosophi": 4, "tealab": [0, 4, 9], "etcd": [0, 4, 13], "leader": 4, "todo": [4, 5], "minio": [4, 13], "tag": [4, 5, 7, 14, 16], "redi": [4, 13], "sentinel": [4, 15], "memcach": 4, "ansbil": 5, "yum": 5, "instal": [5, 7, 8, 9], "epel": 5, "releas": [5, 9], "git": 5, "curl": [5, 8], "sshpass": 5, "27": 5, "useradd": 5, "home": [5, 8], "passwd": 5, "sudo": [5, 9, 16], "all": [0, 5, 14, 15], "nopasswd": 5, "visudo": 5, "ssh": 5, "key": [5, 8], "su": [5, 16], "keygen": 5, "rsa": 5, "ls": 5, "clone": 5, "github": 5, "com": [0, 5, 8, 10, 14], "bodani": 5, "gite": 5, "zhangeamon": [0, 5, 9, 10], "cd": [5, 9], "usernam": [0, 5, 16], "local": [0, 5, 8], "local_bin": [0, 5], "yournam": 5, "disable_rootlogin": 5, "privat": [0, 5], "test": [0, 5], "vvv": 5, "download": [5, 8], "prepar": [5, 8], "xxx": [5, 16], "tealab_packag": 5, "packag": [5, 9], "go": 5, "memcached_port": 7, "11211": 7, "memcached_us": 7, "memcached_maxconn": 7, "1024": 7, "mb": 7, "memcached_caches": 7, "64": 7, "memcached_opt": 7, "create_memcac": 7, "monitor": [0, 7, 8, 10, 11, 14], "tar": 8, "bin": 8, "zxf": 8, "children": 8, "pool1": 8, "minio_ser_bin_loc": 8, "usr": 8, "node_dir": 8, "mnt": 8, "minio1": 8, "minio2": 8, "minio_root_us": 8, "minio_root_password": 8, "f447b20a7fcbf53a5d5be013ea0b15af": [8, 14, 15], "minio_ser_port": 8, "9000": 8, "ui": 8, "minio_conl_port": 8, "9001": 8, "minio_mc_alia": 8, "myminio": 8, "node_host": 8, "minio3": 8, "minio4": 8, "pool": 8, "minio_volum": 8, "http": [8, 10, 11], "sidekick": 8, "gateway": 8, "minio_lb_ser_port": 8, "9009": 8, "sidekick_backend": 8, "tea_ctl": 8, "creat": [8, 15, 16], "destori": 8, "volum": 8, "mc": 8, "admin": [0, 8, 10, 14], "decommiss": 8, "capac": 8, "1st": 8, "73": 8, "mib": 8, "use": [8, 14, 15], "120": 8, "gib": 8, "total": 8, "activ": 8, "2nd": 8, "create_minio": 8, "info": [8, 14], "need": 8, "regist": 8, "support": [8, 13], "object": 8, "durat": 8, "20s": 8, "size": 8, "128mib": 8, "benchmark": 8, "warp": 8, "mix": 8, "access": 8, "secret": 8, "concurr": 8, "30": 8, "obj": 8, "500k": 8, "get": 8, "distrib": 8, "stat": 8, "put": 8, "delet": 8, "autoterm": 8, "zhuanlan": 8, "zhihu": 8, "600295425": 8, "srccluster": 8, "bucket": 8, "destclust": 8, "rclone": 8, "type": [8, 14], "provid": 8, "env_auth": 8, "access_key_id": 8, "secret_access_key": 8, "12345678": 8, "region": 8, "lsd": 8, "mkdir": 8, "sync": [8, 14], "file": [0, 8, 9], "upgrad": [8, 14], "80": [9, 14], "repo_address": 9, "top": [0, 9, 10], "repo_ip": 9, "192": 9, "168": 9, "15": 9, "repo_port": 9, "role": [9, 14], "default": [0, 9, 12, 16], "main": 9, "repo_path": 9, "url": 9, "rpm": 9, "repo_url_packag": 9, "repo_packag": 9, "cat": 9, "baseurl": 9, "packagecloud": 9, "el": 9, "releasev": 9, "basearch": 9, "gpgcheck": 9, "and": [9, 13], "create_repo": 9, "downloadon": 9, "downloaddir": 9, "base": 9, "new_need_add": 9, "repotrack": 9, "new_need_add_": 9, "xml": 9, "createrepo": 9, "idc": [0, 10, 11], "blackbox": [10, 13], "9090": 10, "3000": [10, 11], "9093": 10, "node_export": [10, 11], "9100": [10, 11], "blackbox_export": [10, 11], "9115": [10, 11], "path": [0, 10], "prometheus_data_path": [0, 10], "grafana_admin_usernam": [0, 10], "grafana_admin_password": [0, 10], "domain_http": [0, 10], "www": [0, 10], "baidu": [0, 10], "hostnam": [0, 11, 16], "control": 0, "first": [0, 11], "node1": [0, 11], "node2": [0, 11], "node3": [0, 11], "harden": [], "linux": [13, 14], "cento": 13, "ubuntu": 13, "debian": 13, "nginx": [0, 13], "haproxi": 13, "kafka": 13, "rabbitmq": 13, "repmgr": [4, 13], "patroni": 13, "pgbouncer": [12, 13], "citus": 13, "debezium": 13, "k3s": 13, "habor": 13, "filebeat": 13, "logstash": 13, "elasticsearch": 13, "zabbix": 13, "sentri": 13, "gitea": 13, "dns": 13, "everi": 13, "administr": 13, "at": 13, "some": 13, "point": 13, "reach": 13, "threshold": 13, "when": 13, "manual": [13, 14], "mainten": 13, "of": 13, "cluster": [13, 15, 16], "becom": 13, "arduous": 13, "chore": 13, "the": [13, 14, 15], "necess": 13, "solut": 13, "more": 13, "appar": 13, "here": 13, "will": 13, "be": 13, "discuss": 13, "exampl": 13, "such": 13, "simpl": 13, "power": 13, "process": 13, "should": 13, "obvious": 13, "coher": 13, "uniform": 13, "complex": 13, "instruct": 13, "custom": 13, "script": 13, "which": 13, "are": 13, "never": 13, "tribal": 13, "knowledg": 13, "minim": 13, "world": 13, "beauti": 13, "becaus": 13, "simplic": 13, "have": 13, "cup": 13, "wait": 13, "for": 13, "moment": 13, "everyth": 13, "accomplish": 13, "way": 13, "you": 13, "expect": 13, "it": 13, "to": [13, 14, 15, 16], "swap": 14, "cpu": 14, "6379": [14, 15], "26379": [14, 15], "redis_export": 14, "9121": 14, "master": 14, "has": 14, "persist": 14, "enabl": 14, "redis_rol": 14, "master_groupnam": 14, "mymaster001": 14, "quorum": [14, 15], "replicaof": [12, 14, 16], "replica_prior": 14, "100": [14, 15], "redis_sentinel": [14, 15], "redis_port": [14, 15], "redis_password": [14, 15], "bind": [14, 15], "min": [14, 15], "replica": [14, 15], "write": [14, 15], "max": [14, 15], "lag": [14, 15], "maxmemori": [14, 15], "10gb": [14, 15], "evict": [14, 15], "allkey": [14, 15], "lfu": [14, 15], "sentinel_port": [14, 15], "sentinel_password": [14, 15], "onli": [14, 15], "detect": [14, 15], "failur": [14, 15], "down": 14, "after": 14, "millisecond": [14, 15], "1000": [14, 15], "60": [14, 15], "failov": [14, 16], "timeout": 14, "180": [14, 15], "parallel": 14, "sentinel_dir": [14, 15], "create_redi": 14, "cli": [14, 15], "127": [14, 15], "auth": 14, "ok": 14, "replic": [14, 16], "connected_slav": 14, "slave0": 14, "port": [14, 16], "state": 14, "onlin": 14, "offset": 14, "1548116": 14, "slave1": 14, "runid": 14, "820a82215c08d11bbc0cbabe8061a460cd50c6f6": 14, "slave": 14, "shake": 14, "help": 14, "aliyun": 14, "document": 14, "detail": 14, "111066": 14, "html": [14, 16], "or": 14, "restart": 14, "instanc": 14, "without": 14, "downtim": 14, "redis_clust": 15, "rdb": 15, "aof": 15, "preambl": 15, "yes": 15, "3600": 15, "300": 15, "10000": 15, "appendon": 15, "appendfilenam": 15, "appenddirnam": 15, "appendonlydir": 15, "everysec": 15, "alway": 15, "appendfsync": 15, "no_appendfsync_on_rewrit": 15, "auto_aof_rewrite_percentag": 15, "auto_aof_rewrite_min_s": 15, "64mb": 15, "aof_load_trunc": 15, "aof_use_rdb_preambl": 15, "aof_timestamp_en": 15, "aof_rewrite_incremental_fsync": 15, "down_after_millisecond": 15, "failover_timeout": 15, "parallel_sync": 15, "cluster_en": 15, "cluster_node_timeout": 15, "cluster_migration_barri": 15, "cluster_require_full_coverag": 15, "cluster_allow_reads_when_down": 15, "redis_cluster_replica": 15, "7000": 15, "7001": 15, "7002": 15, "7003": 15, "7004": 15, "7005": 15, "create_redis_clust": 15, "second": [0, 11], "node4": [0, 11], "firewalld": 2, "log": 0, "ro": [], "logrota": [], "logrot": 2, "aser": [], "assert": 2, "kgithub": 5, "postgresql": [4, 16], "application_nam": [12, 16], "node11": [12, 16], "node12": [12, 16], "node13": [12, 16], "node14": [12, 16], "pg_cluster_nam": [12, 16], "batman001": [12, 16], "pg_version": [12, 16], "pg_data": [12, 16], "pgsql": [12, 16], "rep_us": [12, 16], "repus": 12, "rep_password": [12, 16], "123456": [12, 16], "use_slot": [12, 16], "install_pgbounc": [12, 16], "pgtune": [12, 16], "leopard": [12, 16], "in": [12, 16], "ua": [12, 16], "create_postgresql": 12, "node_id": 16, "master_min_child_nod": 16, "ctl": [], "rejoin": 16, "dbname": 16, "user": [0, 16], "forc": 16, "rewind": 16, "dri": 16, "run": 16, "share": [], "preload": [], "librari": [], "set": 16, "password": 16, "encrypt": [0, 16], "scram": 16, "sha": 16, "256": 16, "login": 16, "superus": 16, "alter": 16, "search": [], "public": 16, "databas": 16, "owner": 16, "pgpass": 16, "5432": 16, "chmod": 16, "0600": 16, "pg": 16, "hba": 16, "recoveri": 16, "applic": [], "show": 16, "standbi": 16, "switchov": 16, "repmgrd": 4, "pwd123456": 16, "shared_preload_librari": 16, "repmgr_ctl": 16, "prepare_pg_manu": 16, "password_encrypt": 16, "search_path": 16, "node_nam": 16, "create_pgha_repmgr": 16, "pgha_repmgr": 16, "case": 4, "org": 16, "quickstart": 16, "configur": 16, "etc": 0, "servic": 0, "loki_data_path": 0, "retention_period": 0, "2520h": 0, "other": 0, "server": 0, "json": 0, "log_driv": 0, "etcd_nam": 0, "etcd001": 0, "ectd": 0, "ectd_cert_dir": 0, "ssl": 0, "cert": 0, "etcd_local_backup_dir": 0, "vault": 0, "edit": 0, "decrypt": 0, "demo": [], "reolic": 16, "domain": [], "retent": [], "period": [], "driver": [], "backup": [], "definit": 0, "mo": [], "ot": []}, "objects": {}, "objtypes": {}, "objnames": {}, "titleterms": {"nginx": 1, "node": 2, "etcd": 3, "leader": 3, "todo": 3, "tea": [4, 13], "tealab": 5, "memcach": 7, "minio": 8, "tag": 8, "yum": 9, "postgr": 13, "what": 13, "is": 13, "whi": 13, "philosophi": 13, "redi": [14, 15], "sentinel": 14, "postgresql": 12, "repmgr": 16, "repmgrd": 16, "loki": 6, "case": 16, "demo": [], "create_us": [], "prometheus": [], "data": [], "path": [], "other": [], "server": [], "default": [], "json": [], "file": [], "version": [], "10": [], "14": [], "ectd": [], "wal": []}, "envversion": {"sphinx.domains.c": 2, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 6, "sphinx.domains.index": 1, "sphinx.domains.javascript": 2, "sphinx.domains.math": 2, "sphinx.domains.python": 3, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx": 56}})